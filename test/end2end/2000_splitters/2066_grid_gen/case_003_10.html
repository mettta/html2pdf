<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8" />
  <meta name="keywords" content="HTML2PDF, end2end" />
  <meta name="description" content="HTML2PDF end2end test" />
  <title>Test page</title>
  <link rel="stylesheet" href="../../../shared/css/main.css">

  <script
    defer
    data-debug-mode="true"
    data-markup-debug-mode="true"
    data-print-height='600px'
    data-print-width='600px'
    data-print-left-margin= '50px'
    data-print-right-margin= '50px'
    data-print-top-margin= '50px'
    data-print-bottom-margin= '50px'
    data-print-font-size='16px'
    data-console-assert="true"

    data-forced-page-break-selectors=''
    data-page-break-after-selectors=''
    data-page-break-before-selectors=''

    data-no-break-selectors='.html2pdf4doc-no-break'
    data-no-hanging-selectors='.html2pdf4doc-no-hanging'
    src="../../../../dist/bundle.js"></script>
</head>
<style>
  .grid {
    display: grid;
    grid-auto-flow: row; /* DEFAULT */
    place-items: normal; /* DEFAULT, â†’ stretch stretch */
    place-content: normal; /* DEFAULT , â†’ stretch stretch */
    grid-template-columns: minmax(100px, min-content) minmax(100px, min-content) minmax(100px, min-content) minmax(0, 1fr);
    gap: 6px;
    background-color: rgba(0, 250, 250, 0.2);
  }

  .grid-cell {
    box-sizing: border-box;
    background: rgba(255, 255, 255, 0.75);
    background-image: radial-gradient(rgba(0, 0, 0, 0.15) 1px, transparent 0);
    background-size: 4px 4px;
    background-position: -2px -2px;
  }

  .col0 {
    /* grid-column: 1 / 2; */
  }
  .col2 {
    /* grid-column: 2 / 3; */
  }

  .grid-caption {
    grid-column: 1 / -1;
    font-weight: bold;
  }

  .grid-banner {
    grid-column: 1 / -1;
  }

  .content {
    box-sizing: border-box;
    background-color: white;
    border: 1px solid #666;
    min-height: 88px;
    font-size: 14px;
    line-height: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .low-box {
    min-height: auto;
    height: 20px;
  }
</style>

<!-- basic:
    * FILLER HEIGHT:
    44 (content) * 4 + 6(gap) * 3 = 194
    500 (page) - 194 = 306
    * 306: 0-3 lines are on the 1st page (clean cut, without paging compensation)
-->

<body>
  <div data-testid="pusher" filler="red" style="height:270px"></div>
  <!--
      EXPECTED: cut line between lines 3 and 4.
      BAG:
      * Pusher with height 257...280 px
      (range 307...330 px makes the same for the next iteration)
      leaves low-box content of the 4th line on the previous line
      and moves large content of the 4th line to the next page.
   -->

  <div class="grid" data-testid="root-element">
    <div class="grid-cell grid-caption" data-testid="L0">
      <div class="content">grid caption</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L1-0">
      <div class="content key">[1] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L1-1">
      <div class="content value">[1] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L1-2">
      <div class="content low-box value">[1] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L1-3">
      <div class="content low-box value">[1] value-3</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L2-0">
      <div class="problem2-keyðŸ§¼ content key">[2] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L2-1">
      <div class="problem2-1ðŸ§¼ content value">[2] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L2-2">
      <div class="problem2-2ðŸ§¼ content low-box value">[2] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L2-3">
      <div class="problem2-3ðŸ§¼ content low-box value">[2] value-3</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L3-0">
      <div class="content key">[3] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L3-1">
      <div class="content value">[3] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L3-2">
      <div class="content low-box value">[3] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L3-3">
      <div class="content low-box value">[3] value-3</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L4-0">
      <div class="content key" data-testid="content-L4-0">[4] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L4-1">
      <div class="content value" data-testid="content-L4-1">[4] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L4-2">
      <div class="content low-box value" data-testid="content-L4-2">[4] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L4-3">
      <div class="content low-box value" data-testid="content-L4-3">[4] value-3</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L5-0">
      <div class="content key">[5] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L5-1">
      <div class="content value">[5] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L5-2">
      <div class="content low-box value">[5] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L5-3">
      <div class="content low-box value">[5] value-3</div>
    </div>
    <!-- - -->
    <div class="grid-cell col0" data-testid="L6-0">
      <div class="content key">[6] key</div>
    </div>
    <div class="grid-cell col1" data-testid="L6-1">
      <div class="content value">[6] value-1</div>
    </div>
    <div class="grid-cell col2" data-testid="L6-2">
      <div class="content low-box value">[6] value-2</div>
    </div>
    <div class="grid-cell col3" data-testid="L6-3">
      <div class="content low-box value">[6] value-3</div>
    </div>

  </div>

  <div data-testid="closer" filler="blue" style="height:10px"></div>
</body>

</html>
